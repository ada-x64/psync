---
services:
  psync-server:
    build:
      dockerfile: docker/server/Dockerfile
      context: ../../
    container_name: psync-server__test
    ports:
      - "5000:5000"
      - "5022:5022"
    environment:
      - "PSYNC_ORIGINS=172.26.0.1 127.0.0.1 localhost"
    volumes:
      - ./cert.pem:/app/cert.pem:ro
      - ./key.pem:/app/key.pem:ro
      - ./ssh-key.pub:/app/authorized_keys.src:ro
  psync-client:
    build:
      dockerfile: docker/client/Dockerfile
      context: ../../
    container_name: psync-client__test
    volumes:
      - ./cert.pem:/app/cert.pem:ro
      - ./ssh-key:/app/ssh-key:ro
      - ./ssh-key.pub:/app/ssh-key.pub:ro
